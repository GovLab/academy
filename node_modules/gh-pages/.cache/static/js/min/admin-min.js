function getQuery(a){var e=location.search.substr(1),i=!1;return e.split("&").forEach(function(e){var t=e.split("=");t[0]==a&&(i=decodeURIComponent(t[1]),"/"==i.slice(-1)&&(i=i.slice(0,-1)))}),i}$(document).ready(function(){var a=null;if(a=new Firebase("https://academy-dev.firebaseio.com/"),$("#admin").length){var e=getQuery("oid");e?a.child("project").child(e).once("value",function(a){var e=a.val();for(var i in e)$("#admin :input[name="+i+"]").length&&$("#admin :input[name="+i+"]").val(e[i]);e.team.forEach(function(a){if(0!=a){var e=$("<div/>"),i=$("<img/>"),t=$("<span/>"),n=$("<span/>"),d=$("<span/>");a.image&&(i.attr("src",a.image),i.addClass("image"),t.append(i)),n.addClass("name").text(a.name),d.addClass("profile").text(a.profile),e.append(t),e.append(n),e.append(d),$(".team-wrapper").append(e)}}),e.news.forEach(function(a){if(0!=a){var e=$("<div/>"),i=$("<span/>"),t=$("<span/>");i.addClass("publication").text(a.publication),t.addClass("date").text(a.date),e.append(i),e.append(t),$(".news-wrapper").append(e)}}),$("#admin .b-edit").removeClass("m-display-none")}):(a.child("project").on("child_added",function(a){var e=a.val(),i=$("<tr/>"),t=$("<a/>");t.attr("href",window.location.href+"?oid="+a.key()),t.append($("<i/>").addClass("fa fa-pencil")),i.append($("<td>").addClass("m-ellipsis title").text(e.title)),i.append($("<td>").addClass("m-ellipsis tagline").text(e.tagline)),i.append($("<td>").addClass("m-ellipsis status").text(e.status)),i.append($("<td>").append(t)),i.children(":last-child").append($("<i/>").addClass("fa fa-times").data("oid",a.key())),$("#admin .b-list tbody").prepend(i)}),$("#admin .b-list").removeClass("m-display-none"))}$("#admin .add-button").click(function(){var e={};return $("#admin .b-edit")[0].reset(),$("#admin .b-edit").find(":input[name]").each(function(){e[$(this).attr("name")]=$(this).val()}),e.team=[0],e.news=[0],e.gallery=[0],a.child("project").push(e),!1}),$("#admin .b-list").on("click",".fa.fa-times",function(){a.child("project").child($(this).data("oid")).set(null),$(this).parents("tr").remove()}),$("#admin .b-edit :input[name]").change(function(){var e=getQuery("oid"),i=$(this).attr("name"),t=$(this).val();return a.child("project").child(e).child(i).set(t),!1}),$(".datepicker").each(function(){new Pikaday({field:this,format:"MM/DD/YYYY"})}),$(".uploader").change(function(){var a=this.files[0],e=$(this);if(a.size<209715.2){if(a.name.match(/\.(jpg|jpeg|png|gif)$/)&&a.type.match("image")){var i=new FileReader;return i.onload=function(a){e.data("image",a.target.result)},i.readAsDataURL(a),!0}e.val(""),alert("File must be an image format (jpg, png or gif")}else e.val(""),alert("File size must no exceed 200KB");return!1}),$(".uploader-large").change(function(){var a=this.files[0],e=$(this);if(a.size<524288){if(a.name.match(/\.(jpg|jpeg|png|gif)$/)&&a.type.match("image")){var i=new FileReader;return i.onload=function(a){e.data("image",a.target.result)},i.readAsDataURL(a),!0}e.val(""),alert("File must be an image format (jpg, png or gif")}else e.val(""),alert("File size must no exceed 200KB");return!1}),$(".add-team").click(function(){var e={},i=$(this).parent();if(e.image=i.find(".uploader").data("image")||"",e.name=i.find(".name").val(),e.profile=i.find(".profile").val(),e.name.length){var t=[e],n=$("<div/>"),d=$("<img/>"),p=$("<span/>"),l=$("<span/>"),r=$("<span/>");return $(".team-wrapper div").each(function(){var a={};a.image=$(this).find(".image").attr("src")||"",a.name=$(this).find(".name").text()||"",a.profile=$(this).find(".profile").text()||"",t.push(a)}),a.child("project").child(getQuery("oid")).child("team").set(t),e.image&&(d.attr("src",e.image),d.addClass("image"),p.append(d)),l.addClass("name").text(e.name),r.addClass("profile").text(e.profile),n.append(p),n.append(l),n.append(r),$(".team-wrapper").prepend(n),i.find(".uploader").val("").data("image",""),i.find(".name").val(""),i.find(".profile").val(""),!1}}),$(".add-news").click(function(){var e={},i=$(this).parent();if(e.publication=i.find(".publication").val(),e.date=i.find(".datepicker").val(),e.publication.length){var t=[e],n=$("<div/>"),d=$("<span/>"),p=$("<span/>");return $(".news-wrapper div").each(function(){var a={};a.publication=$(this).find(".publication").text()||"",a.date=$(this).find(".date").text()||"",t.push(a)}),a.child("project").child(getQuery("oid")).child("news").set(t),d.addClass("publication").text(e.publication),p.addClass("date").text(e.date),n.append(d),n.append(p),$(".news-wrapper").prepend(n),i.find(".publication").val(""),i.find(".datepicker").val(""),!1}})});